@using Foody.Models
@model PagedList.IPagedList<Invoice>
@using PagedList.Mvc

@{
    ViewBag.Title = "QuanLyHoaDon";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .stt-invoice {
        background: #beff00;
        border: solid 3px #ddd;
    }
</style>

@section menuleft{
    @Html.Action("MenuStoreAdmin", "Store", new { StoreID = ViewBag.StoreID })
}
<h4 class="text-center">Quản lý hóa đơn</h4>
<br />
<h5 class="text-warning"> @Session["Message"]</h5>
<h5 id="message" class="text-warning"></h5>
<table class="table  table-bordered table-striped">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.First().OrderDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.First().DeliveryDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.First().CustomerName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.First().CustomerPhone)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.First().AddressDelivery)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.First().Sale)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.First().ShippingFee)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.First().ServiceChange)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.First().TotalPrice)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.First().Status)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.OrderDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.DeliveryDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CustomerName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CustomerPhone)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.AddressDelivery)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Sale)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ShippingFee)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ServiceChange)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.TotalPrice)
            </td>
            <td class="col-xs-2">
                @*<p id="DonMoi_@item.InvoiceID">@Html.ActionLink("Đơn mới", "SuaTTHoaDon", new { InvoiceID = item.InvoiceID, status = 0, storeID = ViewBag.StoreID }) </p>
                    <p id="XacThuc_@item.InvoiceID"> @Html.ActionLink("Xác thực", "SuaTTHoaDon", new { InvoiceID = item.InvoiceID, status = 1, storeID = ViewBag.StoreID }) </p>
                    <p id="CheBien_@item.InvoiceID">  @Html.ActionLink("Chế biến", "SuaTTHoaDon", new { InvoiceID = item.InvoiceID, status = 2, storeID = ViewBag.StoreID })</p>
                    <p id="VanChuyen_@item.InvoiceID">   @Html.ActionLink("Vận chuyển", "SuaTTHoaDon", new { InvoiceID = item.InvoiceID, status = 3, storeID = ViewBag.StoreID }) </p>
                    <p id="HoanTat_@item.InvoiceID">  @Html.ActionLink("Hoàn tất", "SuaTTHoaDon", new { InvoiceID = item.InvoiceID, status = 4, storeID = ViewBag.StoreID }) </p>
                    <p id="HuyBo_@item.InvoiceID">  @Html.ActionLink("Hủy bỏ", "SuaTTHoaDon", new { InvoiceID = item.InvoiceID, status = 5, storeID = ViewBag.StoreID }) </p>*@
                <p id="DonMoi_@item.InvoiceID" onclick="updateSTT('@item.InvoiceID',0)">Đơn mới</p>
                <p id="XacThuc_@item.InvoiceID" onclick="updateSTT('@item.InvoiceID',1)">Xác thực</p>
                <p id="CheBien_@item.InvoiceID" onclick="updateSTT('@item.InvoiceID',2)">Chế biến</p>
                <p id="VanChuyen_@item.InvoiceID" onclick="updateSTT('@item.InvoiceID',3)">Vận chuyển</p>
                <p id="HoanTat_@item.InvoiceID" onclick="updateSTT('@item.InvoiceID',4)">Hoàn tất</p>
                <p id="HuyBo_@item.InvoiceID" onclick="updateSTT('@item.InvoiceID',5)">Hủy bỏ</p>
            </td>
            <td>

                @Html.ActionLink("Xem", "InvoiceDetail", new { StoreID = ViewBag.StoreID, InvoiceID = item.InvoiceID, page = 1 })

            </td>
        </tr>
    }
    @if (Model.Count() == 0)
    {
        <tr>
            <td colspan="10">
                Không có dữ liệu
            </td>
        </tr>
    }
</table>
@Html.PagedListPager(Model, page => Url.Action("QuanLyHoaDon", new { StoreID = ViewBag.StoreID, page }))
<div id="BaseUrl"
     data-storeid="@ViewBag.StoreID"
     data-baseurl="@Context.Request.Url.GetLeftPart(UriPartial.Authority)@Url.Content("~/")"></div>
<script src="~/Scripts/invoice.js"></script>
